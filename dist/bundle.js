(()=>{let e=[];const t=document.querySelector(".main-container");function n(){localStorage.setItem("myLibrary",JSON.stringify(e)),console.log("populated storage"),console.log(localStorage.getItem("myLibrary"))}function d(){localStorage.clear()}localStorage.getItem("myLibrary")?function(){let t=localStorage.getItem("myLibrary"),n=JSON.parse(t);e=n}():n();class a{constructor(e,t,n,d){this.title=e,this.author=t,this.pages=n,this.read=d}}function i(){e.forEach((a=>{const o=document.createElement("div");o.classList.add("card");const l=e.indexOf(a);o.setAttribute("data-index",l);const r=document.createElement("button");r.textContent="X",r.classList="deleteButton",r.addEventListener("click",(()=>{!function(t){e.splice(t,1)}(l),c(),i(),d(),n()}));const s=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),m=document.createElement("input"),h=document.createElement("label");s.classList.add("title"),m.classList.add("isRead"),h.setAttribute("for","isRead"),m.setAttribute("type","checkbox"),a.read?(m.checked=!0,console.log(a.read)):m.checked=!1,m.id="isRead",m.onchange=function(){a.read=m.checked,d(),n()},s.textContent=a.title,u.textContent="by "+a.author,p.textContent=a.pages+" pages",h.textContent="Have you read this?",o.appendChild(s),o.appendChild(u),o.appendChild(p),o.appendChild(h),o.appendChild(m),o.appendChild(r),t.appendChild(o)}))}function c(){for(;t.firstChild;)t.removeChild(t.firstChild)}i(),document.getElementById("addButton").addEventListener("click",(()=>{!function(){if(null===document.getElementById("pop-up")){const o=document.createElement("form");o.classList.add("pop-up"),o.id="pop-up";const l=document.createElement("input"),r=document.createElement("label");r.setAttribute("for","title"),r.textContent="Title:",l.id="title",l.required=!0,o.appendChild(r),o.appendChild(l),l.addEventListener("input",(()=>{l.checkValidity()?l.setCustomValidity(""):l.setCustomValidity("Please include a title of at least one (1) character in length.")}));const s=document.createElement("input"),u=document.createElement("label");u.setAttribute("for","author"),u.textContent="Author:",s.id="author",s.required=!0,o.appendChild(u),o.appendChild(s);const p=document.createElement("input"),m=document.createElement("label");m.setAttribute("for","pages"),m.textContent="Pages:",p.id="pages",p.required=!0,o.appendChild(m),o.appendChild(p);const h=document.createElement("input"),C=document.createElement("label");C.setAttribute("for","read"),C.textContent="Have you read it?",h.id="read",h.classList.add("isRead"),h.type="checkbox",o.appendChild(C),o.appendChild(h);const E=document.createElement("button");E.id="submit",E.classList.add("popUpButton"),E.textContent="Submit",E.addEventListener("click",(()=>{var t,o,r,u;l.checkValidity()&&(t=l.value,o=s.value,r=p.value,u=h.checked,e.push(new a(t,o,r,u)),d(),n(),c(),i())})),o.appendChild(E);const b=document.createElement("button");b.id="cancel",b.classList.add("popUpButton"),b.textContent="Cancel",b.addEventListener("click",(()=>{o.remove()})),o.appendChild(b),t.appendChild(o)}}()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VW1FLEtBQUssSUFBSWpELEVBQUtFLEVBQU9DLEVBQVFDLEVBQU9DLElBQzlDWCxJQUNBUixJQXVKWW1DLElBQ0FkLFFBSVIyQixFQUFNSixZQUFZaUIsR0FFbEIsTUFBTUcsRUFBZWxFLFNBQVMwQixjQUFjLFVBQzVDd0MsRUFBYXRCLEdBQUssU0FDbEJzQixFQUFhdkMsVUFBVUMsSUFBSSxlQUMzQnNDLEVBQWFqQyxZQUFjLFNBQzNCaUMsRUFBYWhDLGlCQUFpQixTQUFTLEtBQ25DZ0IsRUFBTWlCLFlBR1ZqQixFQUFNSixZQUFZb0IsR0FFbEJuRSxFQUFjK0MsWUFBWUksSUFNOUJrQixPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1saWJyYXJ5Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBteUxpYnJhcnkgPSBbXTtcbmNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY29udGFpbmVyXCIpO1xuXG5mdW5jdGlvbiBwb3B1bGF0ZVN0b3JhZ2UoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteUxpYnJhcnlcIiwgSlNPTi5zdHJpbmdpZnkobXlMaWJyYXJ5KSk7XG4gICAgY29uc29sZS5sb2coXCJwb3B1bGF0ZWQgc3RvcmFnZVwiKTtcbiAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15TGlicmFyeVwiKSk7XG59XG5cbmZ1bmN0aW9uIGdldFN0b3JhZ2UoKSB7XG4gICAgbGV0IGpzb25TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15TGlicmFyeVwiKTtcbiAgICBsZXQgcmV0cmlldmVkT2JqZWN0ID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICBteUxpYnJhcnkgPSByZXRyaWV2ZWRPYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGNsZWFyU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbn1cblxuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15TGlicmFyeVwiKSkge1xuICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xufSBlbHNlIHtcbiAgICBnZXRTdG9yYWdlKCk7XG59XG5cbmZ1bmN0aW9uIGFkZEJvb2tUb0xpYnJhcnkodGl0bGUsIGF1dGhvciwgcGFnZXMsIHJlYWQpIHtcbiAgICBteUxpYnJhcnkucHVzaChuZXcgQm9vayh0aXRsZSwgYXV0aG9yLCBwYWdlcywgcmVhZCkpO1xuICAgIGNsZWFyU3RvcmFnZSgpO1xuICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xufVxuXG5jbGFzcyBCb29rIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgYXV0aG9yLCBwYWdlcywgcmVhZCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yO1xuICAgICAgICB0aGlzLnBhZ2VzID0gcGFnZXM7XG4gICAgICAgIHRoaXMucmVhZCA9IHJlYWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWZyZXNoTGlicmFyeSgpIHtcbiAgICBteUxpYnJhcnkuZm9yRWFjaCgoQm9vaykgPT4ge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpO1xuICAgICAgICBjb25zdCBpbmRleCA9IG15TGlicmFyeS5pbmRleE9mKEJvb2spXG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGluZGV4KTtcblxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJYXCI7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QgPSBcImRlbGV0ZUJ1dHRvblwiO1xuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVCb29rKGluZGV4KTtcbiAgICAgICAgICAgIGNsZWFyTGlicmFyeSgpO1xuICAgICAgICAgICAgcmVmcmVzaExpYnJhcnkoKTtcbiAgICAgICAgICAgIGNsZWFyU3RvcmFnZSgpO1xuICAgICAgICAgICAgcG9wdWxhdGVTdG9yYWdlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IGF1dGhvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwYWdlc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBpc1JlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCBpc1JlYWRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG5cbiAgICAgICAgdGl0bGVEaXYuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpO1xuICAgICAgICBpc1JlYWQuY2xhc3NMaXN0LmFkZChcImlzUmVhZFwiKTtcbiAgICAgICAgaXNSZWFkTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiaXNSZWFkXCIpO1xuICAgICAgICBpc1JlYWQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgICAgICBpZiAoQm9vay5yZWFkKSB7XG4gICAgICAgICAgICBpc1JlYWQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhCb29rLnJlYWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNSZWFkLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaXNSZWFkLmlkID0gXCJpc1JlYWRcIjtcbiAgICAgICAgaXNSZWFkLm9uY2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIEJvb2sucmVhZCA9IGlzUmVhZC5jaGVja2VkO1xuICAgICAgICAgICAgY2xlYXJTdG9yYWdlKCk7XG4gICAgICAgICAgICBwb3B1bGF0ZVN0b3JhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGl0bGVEaXYudGV4dENvbnRlbnQgPSBCb29rLnRpdGxlO1xuICAgICAgICBhdXRob3JEaXYudGV4dENvbnRlbnQgPSBcImJ5IFwiICsgQm9vay5hdXRob3I7XG4gICAgICAgIHBhZ2VzRGl2LnRleHRDb250ZW50ID0gQm9vay5wYWdlcyArIFwiIHBhZ2VzXCI7XG4gICAgICAgIGlzUmVhZExhYmVsLnRleHRDb250ZW50ID0gXCJIYXZlIHlvdSByZWFkIHRoaXM/XCI7XG5cbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHRpdGxlRGl2KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGF1dGhvckRpdik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChwYWdlc0Rpdik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpc1JlYWRMYWJlbCk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpc1JlYWQpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH0pO1xufVxuXG5cblxuZnVuY3Rpb24gcmVtb3ZlQm9vayhpbmRleCkge1xuICAgIG15TGlicmFyeS5zcGxpY2UoaW5kZXgsIDEpO1xufVxuXG5mdW5jdGlvbiBjbGVhckxpYnJhcnkoKSB7XG4gICAgd2hpbGUgKG1haW5Db250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtYWluQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1haW5Db250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxufTtcblxucmVmcmVzaExpYnJhcnkoKTtcblxuLy8gQlVUVE9OXG5cbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkQnV0dG9uXCIpO1xuXG5mdW5jdGlvbiBjcmVhdGVQb3B1cCAoKSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9wLXVwXCIpID09PSBudWxsKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHBvcFVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICBwb3BVcC5jbGFzc0xpc3QuYWRkKFwicG9wLXVwXCIpO1xuICAgICAgICBwb3BVcC5pZCA9IFwicG9wLXVwXCI7XG4gICAgXG4gICAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCB0aXRsZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgdGl0bGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJ0aXRsZVwiKTtcbiAgICAgICAgdGl0bGVMYWJlbC50ZXh0Q29udGVudCA9IFwiVGl0bGU6XCJcbiAgICAgICAgdGl0bGVJbnB1dC5pZCA9IFwidGl0bGVcIjtcbiAgICAgICAgLy8gdGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJtaW5sZW5ndGhcIiwgXCIxXCIpO1xuICAgICAgICB0aXRsZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQodGl0bGVMYWJlbCk7XG4gICAgICAgIHBvcFVwLmFwcGVuZENoaWxkKHRpdGxlSW5wdXQpO1xuXG4gICAgICAgIC8vIG5vdCBzdXJlIGlmIEknbSBnb2luZyB0byBuZWVkIHRoaXMgXG4gICAgICAgIC8vIHRpdGxlSW5wdXQubWluID0gMDtcbiAgICAgICAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGl0bGVJbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgICAgICAgICB0aXRsZUlucHV0LnNldEN1c3RvbVZhbGlkaXR5KCdQbGVhc2UgaW5jbHVkZSBhIHRpdGxlIG9mIGF0IGxlYXN0IG9uZSAoMSkgY2hhcmFjdGVyIGluIGxlbmd0aC4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGVJbnB1dC5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXV0aG9ySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCBhdXRob3JMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGF1dGhvckxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImF1dGhvclwiKTtcbiAgICAgICAgYXV0aG9yTGFiZWwudGV4dENvbnRlbnQgPSBcIkF1dGhvcjpcIjtcbiAgICAgICAgYXV0aG9ySW5wdXQuaWQgPSBcImF1dGhvclwiO1xuICAgICAgICBhdXRob3JJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgIHBvcFVwLmFwcGVuZENoaWxkKGF1dGhvckxhYmVsKTtcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQoYXV0aG9ySW5wdXQpO1xuICAgIFxuICAgICAgICBjb25zdCBwYWdlc0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgY29uc3QgcGFnZXNMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIHBhZ2VzTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwicGFnZXNcIik7XG4gICAgICAgIHBhZ2VzTGFiZWwudGV4dENvbnRlbnQgPSBcIlBhZ2VzOlwiXG4gICAgICAgIHBhZ2VzSW5wdXQuaWQgPSBcInBhZ2VzXCI7XG4gICAgICAgIHBhZ2VzSW5wdXQucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICBwb3BVcC5hcHBlbmRDaGlsZChwYWdlc0xhYmVsKTtcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQocGFnZXNJbnB1dCk7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlYWRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGNvbnN0IHJlYWRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIHJlYWRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJyZWFkXCIpO1xuICAgICAgICByZWFkTGFiZWwudGV4dENvbnRlbnQgPSBcIkhhdmUgeW91IHJlYWQgaXQ/XCJcbiAgICAgICAgcmVhZElucHV0LmlkID0gXCJyZWFkXCI7XG4gICAgICAgIHJlYWRJbnB1dC5jbGFzc0xpc3QuYWRkKFwiaXNSZWFkXCIpO1xuICAgICAgICByZWFkSW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQocmVhZExhYmVsKTtcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQocmVhZElucHV0KTtcbiAgICBcbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pZCA9IFwic3VibWl0XCI7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicG9wVXBCdXR0b25cIik7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU3VibWl0XCI7XG5cbiAgICAgICAgLy8gbWFrZSB0aGlzIGNoZWNrIGFsbCBvZiB0aGUgZm9ybVxuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGl0bGVJbnB1dC5jaGVja1ZhbGlkaXR5KCkpe1xuICAgICAgICAgICAgICAgIGFkZEJvb2tUb0xpYnJhcnkodGl0bGVJbnB1dC52YWx1ZSwgYXV0aG9ySW5wdXQudmFsdWUsIHBhZ2VzSW5wdXQudmFsdWUsIHJlYWRJbnB1dC5jaGVja2VkKTtcbiAgICAgICAgICAgICAgICBjbGVhckxpYnJhcnkoKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoTGlicmFyeSgpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHBvcFVwLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gICAgXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBjYW5jZWxCdXR0b24uaWQgPSBcImNhbmNlbFwiO1xuICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LmFkZChcInBvcFVwQnV0dG9uXCIpO1xuICAgICAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBwb3BVcC5yZW1vdmUoKTtcbiAgICAgICAgfSlcbiAgICBcbiAgICAgICAgcG9wVXAuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcbiAgICBcbiAgICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3BVcCk7XG4gICAgfVxuXG59XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjcmVhdGVQb3B1cCgpO1xufSlcblxuZnVuY3Rpb24gY2xlYXJQb3BVcChlbGVtZW50KSB7XG4gICAgcG9wVXAucmVtb3ZlKCk7XG59XG4iXSwibmFtZXMiOlsibXlMaWJyYXJ5IiwibWFpbkNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBvcHVsYXRlU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsImdldEl0ZW0iLCJjbGVhclN0b3JhZ2UiLCJjbGVhciIsImpzb25TdHJpbmciLCJyZXRyaWV2ZWRPYmplY3QiLCJwYXJzZSIsImdldFN0b3JhZ2UiLCJCb29rIiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsImF1dGhvciIsInBhZ2VzIiwicmVhZCIsInRoaXMiLCJyZWZyZXNoTGlicmFyeSIsImZvckVhY2giLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5kZXgiLCJpbmRleE9mIiwic2V0QXR0cmlidXRlIiwiZGVsZXRlQnV0dG9uIiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic3BsaWNlIiwicmVtb3ZlQm9vayIsImNsZWFyTGlicmFyeSIsInRpdGxlRGl2IiwiYXV0aG9yRGl2IiwicGFnZXNEaXYiLCJpc1JlYWQiLCJpc1JlYWRMYWJlbCIsImNoZWNrZWQiLCJpZCIsIm9uY2hhbmdlIiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJnZXRFbGVtZW50QnlJZCIsInBvcFVwIiwidGl0bGVJbnB1dCIsInRpdGxlTGFiZWwiLCJyZXF1aXJlZCIsImNoZWNrVmFsaWRpdHkiLCJzZXRDdXN0b21WYWxpZGl0eSIsImF1dGhvcklucHV0IiwiYXV0aG9yTGFiZWwiLCJwYWdlc0lucHV0IiwicGFnZXNMYWJlbCIsInJlYWRJbnB1dCIsInJlYWRMYWJlbCIsInR5cGUiLCJzdWJtaXRCdXR0b24iLCJ2YWx1ZSIsInB1c2giLCJjYW5jZWxCdXR0b24iLCJyZW1vdmUiLCJjcmVhdGVQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=